---
title: 公网服务器加内网穿透玩的骚操作
tags:
  - 内网穿透
  - NAS
  - 有趣的东西
categories: NAS
keywords:
  - 内网穿透
  - NAS
  - 有趣的东西
description: 利用公网服务器加上内网穿透来玩点骚的
cover: >-
  https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2020-3-26/BogImages/1585210105732.png
abbrlink: b6c334ff
date: 2019-05-26 00:00:00
---


## 太忙了
因为这两周实在是太忙了，木得时间给写文章给大家胡乱分享我搞过的那些操作。
那，差不多咱们就开始操作啦，这次续着上次的说的那篇写啦
上次咱们成功地做好了内网穿透，但是只是在PC端做的

## 用手机连接我们的内网NAS
### 安装zerotier
那这次咱们怎么搞手机端和NAS的连接呢

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558868419796.png)

还是上次的那个zerotier，他是有移动端的软件的
Android、iOS 都有

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558868520239.png)

各位大佬劳烦自己去下载一下下哈，我这里就不提供百度云盘的链接啦~~

安装好软件之后，可以看到界面长这样

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558868806089.png)
### 加入到网络
右上角点了添加的+之后，会有这样的界面

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558868849376.png)

然后就是常规的操作了，前文有说，到管理页面去允许设备访问什么的，不清楚的同学可以回前文看看怎么操作哦

### 连接到网络
搞完之后，点击开关那个按钮

在这个过程中，会有个VPN创建提示，忘记是上一步提醒的，还是这步提醒的
不说这么多~同意就好了

## 自动备份照片
接着，就是连接过去了呀
之前说过，可以在拍完照之后，连上WiFi就自动备份我的照片是吧
这可以有多种方案，在这里，我就使用 DS photo这个软件和在NAS中安装的 Photo Station 来做了

OK，回到NAS中，咱们装好Photo Station先

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558869214185.png)

在这里，我这里已经安装好，而且里面内容也挺多的，就不卸载演示安装了
很简单的，相信大家肯定不会在这个安装上面出什么幺蛾子

装好之后，打开它，可以创建相册。

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558869332870.png)

在这里，请谨慎设置好自己相册的权限~千万别一时偷懒，不检查访问权限
到时被全世界都看到自己拍的美照，迷倒一众小迷弟、小迷妹就不太好了

搞完之后，就没他什么事了

咱们再回到手机这边

手机这边这个时候要装好 DS photo，应用商店有下~
下载之后，打开，可以看到

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558869571393.png)

输入好自己的穿透的局域网IP

咳~刚才我蓝屏了…………

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558870264636.png)

但是不影响我继续写，幸好编辑器有自动保存，哈哈哈

登录进去就可以看到相册了

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558870409177.png)

点击照片备份
进去之后，右上角还有一个设置
继续点它，又可以看到这样的界面

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558870484619.png)

根据提示，我们选择好备份文件夹和目的文件夹
设置好只在WiFi下备份、否则你的流量会像泄洪那样疯狂

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558870614919.png)

设置好之后，照片、视频就自动上传啦
因为刚才蓝屏了，没截到速度最高的图
但是，随手一截就是2.7MB/s，也很美滋滋啦

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558870771391.png)

你以为这样就完了？

## 把公网服务器用起来

肯定不会呀~标题的公网服务器都还没现身呢
那~它有什么用呢？
这就又得从我们现在的情况说起了

目前，我们已经搞定了PC端-NAS、移动端-NAS了，剩下的服务器-NAS也肯定不是问题，对吧
而且咱们已经在NAS里面安装好photo station 了是吧
OK，仅仅这些功能还不能满足本人的需求
前文说到的远程推送链接到NAS中下载也还没实现呢
所以，咱们先把远程推送链接下载给说了吧

咱们还是先把套件装好吧
### 安装Download Station
download station 安排上~

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558879113602.png)

搞定之后，咱们再到浏览器里面，把下载推送插件也安排上

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558879209147.png)

安排好这两个东西之后，在这个download station的插件这里右键一下，进入选项
把IP、账号、密码什么的，填好填好
![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558879325570.png)

接着，随意推一个链接去下载看看？

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558879722681.png)

然后就会自动在后台下载了

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558880247256.png)

那说了这么多，跟公网服务器有啥关系呢，小朋友你是否有很多问好.jpg

嗯，看起来似乎的确没啥联系的。。。

但是，试想一下，如果咱们某一天忘记开那个内网穿透的软件了，或者因为某些原因导致了本机内网穿透那个软件没能连接过去。而且在移动端里面使用的话，很容易就会让后台把这个软件给杀了，导致VPN被迫关闭~也会连接不上，搞得又得重开一次，多麻烦哟，是吧。
这个时候，要是你有公网服务器，外加一个域名~简简单单的一个域名。
只要几块钱一年，少吃一个鸡腿能玩一年耶
有了这两个东西，我们就不用背繁杂的IP地址了，是吧
而且192.168.....这样打起来还麻烦....

很多时候，我们只是想推一个链接到NAS里面下载，又不想装这么多的软件来做穿透连接，搞这搞那。想到哪里都可以搞定对吧。

就拿本人的情况，现在完全可以做到移动端不打开zerotier这个软件就可以推送下载链接了
想查看NAS的情况、推送下载链接、相册什么的，直接输域名就好了

那就，看看怎么做吧

### 购买域名与服务器

服务器和域名这个不多说，自己到云服务器的提供商里面购买，阿里云、腾讯云、亚马逊什么的，喜欢那个挑那个哈
在这里，本人使用阿里云以及一个域名来完成操作

服务器创建搭建好，是一个Ubuntu 16.04、1000G流量、2G内存的服务器
在防护策略里面，把端口开了，以便后续访问

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558880763855.png)


搞定之后~使用XShell 连过去之后，把服务器上面的zerotier给装上吧
根据之前的经验，相信你很快就能自己把它给装上了
然后，ping一下测试一下能不能搞通哈


![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558881584404.png)

还没完，咱们要到服务器里面把 **端口转发** 给打开

>echo 1 > /proc/sys/net/ipv4/ip_forward

然后再使用 rinetd 这个工具搞定咱们的需求
apt-get install rinetd
然后 vim  改一下配置 文件 /etc/rinetd.conf

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558881404635.png)

命令格式是
>bindaddress bindport connectaddress connectport
绑定的地址  绑定的端口  连接的地址  连接的端口

还没完呢。。。域名还没绑定哦,登录阿里云的服务器进行一个DNS处理

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558881809838.png)

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558881856736.png)

设置好之后。可以说今天的内容算是差不多完成了
这个时候，用手机连接过去看看

用上我们的 DS get 这个软件图推送下载任务

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558882029776.png)

可以看到，是**用域名连接**的，多方便~

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558882061647.png)

刚才测试给大家看的下载插件使用，还可以看到完成的记录

使用群晖管家则可以看到目前NAS里面的情况和各项指标啦

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558882227554.png)

![](https://marxcbr.oss-cn-shenzhen.aliyuncs.com/MARXCBR/2019-5-26/公网服务器加内网穿透玩的骚操作/1558882273662.png)

所以有个域名和公网服务器是不是方便的很呀~

<center>要是感觉不错的话，就留个言评论一下下呀，欢迎各位大哥指正</center>